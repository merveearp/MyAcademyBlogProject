@{
    ViewData["Title"] = "Index";
    Layout = "~/Areas/Admin/Views/Admin/AdminLayout.cshtml";
}

<div class="">
    <div class="pd-ltr-20">
       
        <div class="card-box pd-20 mb-30 shadow-sm" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 12px;">
            <div class="row align-items-center">
                <div class="col-md-4 text-center">
                    <img src="/ADMIN/vendors/images/banner-img.png" alt="" style="max-width: 100%; height: auto; filter: drop-shadow(0 4px 6px rgba(0,0,0,0.1));">
                </div>
                <div class="col-md-8">
                    <h4 class="font-20 weight-500 mb-10 text-white">
                        Hoşgeldiniz
                        <div class="weight-600 font-30 mt-2" style="color: #ffd700;">Admin Paneli</div>
                    </h4>
                    <p class="font-16 max-width-600 text-white" style="opacity: 0.9;">
                        Dashboard'unuzdan tüm blog aktivitelerini takip edebilir ve yönetebilirsiniz.
                    </p>
                </div>
            </div>
        </div>

      
        <div class="row mb-30">
            <div class="col-xl-3 col-md-6 mb-20">
                <div class="card-box pd-20 text-center shadow-sm hover-card" style="border-radius: 12px; border-left: 4px solid #1e88e5; transition: transform 0.3s ease;">
                    <div class="mb-3">
                        <i class="icon-copy dw dw-newspaper" style="font-size: 40px; color: #1e88e5;"></i>
                    </div>
                    <h5 class="text-muted mb-2" style="font-weight: 500;">Toplam Blog</h5>
                    <h2 class="text-blue mb-0" style="font-weight: 700;">@ViewBag.BlogCount</h2>
                </div>
            </div>
            <div class="col-xl-3 col-md-6 mb-20">
                <div class="card-box pd-20 text-center shadow-sm hover-card" style="border-radius: 12px; border-left: 4px solid #43a047; transition: transform 0.3s ease;">
                    <div class="mb-3">
                        <i class="icon-copy dw dw-folder" style="font-size: 40px; color: #43a047;"></i>
                    </div>
                    <h5 class="text-muted mb-2" style="font-weight: 500;">Kategoriler</h5>
                    <h2 class="text-green mb-0" style="font-weight: 700;">@ViewBag.CategoryCount</h2>
                </div>
            </div>
            <div class="col-xl-3 col-md-6 mb-20">
                <div class="card-box pd-20 text-center shadow-sm hover-card" style="border-radius: 12px; border-left: 4px solid #fb8c00; transition: transform 0.3s ease;">
                    <div class="mb-3">
                        <i class="icon-copy dw dw-chat3" style="font-size: 40px; color: #fb8c00;"></i>
                    </div>
                    <h5 class="text-muted mb-2" style="font-weight: 500;">Yorumlar</h5>
                    <h2 class="text-orange mb-0" style="font-weight: 700;">@ViewBag.CommentCount</h2>
                </div>
            </div>
            <div class="col-xl-3 col-md-6 mb-20">
                <div class="card-box pd-20 text-center shadow-sm hover-card" style="border-radius: 12px; border-left: 4px solid #e53935; transition: transform 0.3s ease;">
                    <div class="mb-3">
                        <i class="icon-copy dw dw-user1" style="font-size: 40px; color: #e53935;"></i>
                    </div>
                    <h5 class="text-muted mb-2" style="font-weight: 500;">Kullanıcılar</h5>
                    <h2 class="text-red mb-0" style="font-weight: 700;">@ViewBag.UserCount</h2>
                </div>
            </div>
        </div>

       
        <div class="row">
            <div class="col-xl-8 mb-30">
                <div class="card-box pd-20 shadow-sm" style="border-radius: 12px;">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h4 class="mb-0" style="font-weight: 600; color: #333;">
                            <i class="icon-copy dw dw-analytics-21 mr-2" style="color: #1e88e5;"></i>
                            Kategoriye Göre Blog Sayısı
                        </h4>
                        <span class="badge badge-primary" style="padding: 8px 12px; border-radius: 8px;">Bar Chart</span>
                    </div>
                    <canvas id="categoryBlogChart" style="max-height: 350px;"></canvas>
                </div>
            </div>
            <div class="col-xl-4 mb-30">
                <div class="card-box pd-20 shadow-sm" style="border-radius: 12px;">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h4 class="mb-0" style="font-weight: 600; color: #333;">
                            <i class="icon-copy dw dw-message mr-2" style="color: #fb8c00;"></i>
                            Blog Yorumları
                        </h4>
                        <span class="badge badge-info" style="padding: 8px 12px; border-radius: 8px;">Doughnut</span>
                    </div>
                    <canvas id="blogCommentChart" style="max-height: 350px;"></canvas>
                </div>
            </div>
        </div>

       
        <div class="row">
            <div class="col-xl-8 mb-30">
                <div class="card-box pd-20 shadow-sm" style="border-radius: 12px;">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h4 class="mb-0" style="font-weight: 600; color: #333;">
                            <i class="icon-copy dw dw-tag mr-2" style="color: #43a047;"></i>
                            Tag'lere Göre Blog Sayısı
                        </h4>
                        <span class="badge badge-success" style="padding: 8px 12px; border-radius: 8px;">Polar Area</span>
                    </div>
                    <canvas id="tagBlogChart" style="max-height: 400px;"></canvas>
                </div>
            </div>
            <div class="col-xl-4 mb-30">
                <div class="card-box pd-20 shadow-sm" style="border-radius: 12px;">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h4 class="mb-0" style="font-weight: 600; color: #333;">
                            <i class="icon-copy dw dw-pie-chart mr-2" style="color: #8e24aa;"></i>
                            İçerik Dağılımı
                        </h4>
                        <span class="badge badge-warning" style="padding: 8px 12px; border-radius: 8px;">Pie Chart</span>
                    </div>
                    <canvas id="contentDistributionChart" style="max-height: 400px;"></canvas>
                </div>
            </div>
        </div>

        
        <div class="card-box mb-30 shadow-sm" style="border-radius: 12px;">
            <div class="pd-20 d-flex justify-content-between align-items-center" style="border-bottom: 2px solid #f0f0f0;">
                <h4 class="mb-0" style="font-weight: 600; color: #333;">
                    <i class="icon-copy dw dw-star mr-2" style="color: #ffc107;"></i>
                    Son Eklenen Bloglar
                </h4>
                <a asp-area="Admin" asp-controller="Blog" asp-action="Index" class="text-primary" style="font-weight: 500; text-decoration: none;">Tümünü Gör →</a>
            </div>
            <ul class="list-group list-group-flush">
                @foreach (var blog in ViewBag.LastBlogs)
                {
                    <li class="list-group-item d-flex justify-content-between align-items-center" style="padding: 18px 20px; transition: background 0.3s ease;">
                        <div>
                            <i class="icon-copy dw dw-right-arrow-1 mr-2" style="color: #667eea;"></i>
                            <strong style="color: #333;">@blog.Title</strong>
                        </div>
                        <span class="badge badge-secondary" style="padding: 6px 12px; border-radius: 8px;">Yeni</span>
                    </li>
                }
            </ul>
        </div>
    </div>
</div>

<style>
    .hover-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 20px rgba(0,0,0,0.15) !important;
    }

    .list-group-item:hover {
        background-color: #f8f9fa !important;
        cursor: pointer;
    }

    .shadow-sm {
        box-shadow: 0 2px 8px rgba(0,0,0,0.08) !important;
    }

    .badge {
        font-size: 11px;
        font-weight: 600;
        letter-spacing: 0.5px;
    }
</style>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
   
    const colorPalette = [
        'rgba(30, 136, 229, 0.8)',
        'rgba(67, 160, 71, 0.8)',
        'rgba(251, 140, 0, 0.8)',
        'rgba(229, 57, 53, 0.8)',
        'rgba(142, 36, 170, 0.8)',
        'rgba(0, 172, 193, 0.8)',
        'rgba(255, 193, 7, 0.8)',
        'rgba(156, 39, 176, 0.8)'
    ];

    const borderColors = [
        'rgba(30, 136, 229, 1)',
        'rgba(67, 160, 71, 1)',
        'rgba(251, 140, 0, 1)',
        'rgba(229, 57, 53, 1)',
        'rgba(142, 36, 170, 1)',
        'rgba(0, 172, 193, 1)',
        'rgba(255, 193, 7, 1)',
        'rgba(156, 39, 176, 1)'
    ];

   
    const categoryNames = @Html.Raw(Json.Serialize(ViewBag.CategoryNames));
    const categoryBlogCounts = @Html.Raw(Json.Serialize(ViewBag.CategoryBlogCounts));

    new Chart(document.getElementById('categoryBlogChart'), {
        type: 'bar',
        data: {
            labels: categoryNames,
            datasets: [{
                label: 'Blog Sayısı',
                data: categoryBlogCounts,
                backgroundColor: colorPalette,
                borderColor: borderColors,
                borderWidth: 2,
                borderRadius: 8
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    display: true,
                    position: 'top',
                    labels: {
                        font: {
                            size: 13,
                            weight: '500'
                        }
                    }
                },
                tooltip: {
                    backgroundColor: 'rgba(0, 0, 0, 0.8)',
                    padding: 12,
                    borderRadius: 8
                }
            },
            scales: {
                y: {
                    beginAtZero: true,
                    grid: {
                        display: true,
                        color: 'rgba(0,0,0,0.05)'
                    },
                    ticks: {
                        font: { size: 12 }
                    }
                },
                x: {
                    grid: { display: false },
                    ticks: {
                        font: { size: 12 }
                    }
                }
            }
        }
    });

   
    const blogTitles = @Html.Raw(Json.Serialize(ViewBag.BlogTitles));
    const blogCommentCounts = @Html.Raw(Json.Serialize(ViewBag.BlogCommentCounts));

    new Chart(document.getElementById('blogCommentChart'), {
        type: 'doughnut',
        data: {
            labels: blogTitles,
            datasets: [{
                data: blogCommentCounts,
                backgroundColor: colorPalette,
                borderColor: '#fff',
                borderWidth: 3
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    display: true,
                    position: 'bottom',
                    labels: {
                        padding: 15,
                        font: {
                            size: 11,
                            weight: '500'
                        },
                        usePointStyle: true,
                        pointStyle: 'circle'
                    }
                },
                tooltip: {
                    backgroundColor: 'rgba(0, 0, 0, 0.8)',
                    padding: 12,
                    borderRadius: 8
                }
            }
        }
    });

   
    const tagNames = @Html.Raw(Json.Serialize(ViewBag.TagNames));
    const tagBlogCounts = @Html.Raw(Json.Serialize(ViewBag.TagBlogCounts));

    new Chart(document.getElementById('tagBlogChart'), {
        type: 'polarArea',
        data: {
            labels: tagNames,
            datasets: [{
                label: 'Blog Sayısı',
                data: tagBlogCounts,
                backgroundColor: colorPalette,
                borderColor: '#fff',
                borderWidth: 2
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    display: true,
                    position: 'right',
                    labels: {
                        padding: 10,
                        font: {
                            size: 12,
                            weight: '500'
                        },
                        usePointStyle: true,
                        pointStyle: 'circle',
                        boxWidth: 12,
                        boxHeight: 12
                    }
                },
                tooltip: {
                    backgroundColor: 'rgba(0, 0, 0, 0.8)',
                    padding: 12,
                    borderRadius: 8
                }
            },
            scales: {
                r: {
                    beginAtZero: true,
                    ticks: {
                        display: true,
                        font: { size: 10 }
                    },
                    grid: {
                        color: 'rgba(0, 0, 0, 0.1)'
                    }
                }
            }
        }
    });

    
    new Chart(document.getElementById('contentDistributionChart'), {
        type: 'pie',
        data: {
            labels: ['Bloglar', 'Kategoriler', 'Yorumlar', 'Kullanıcılar'],
            datasets: [{
                data: [
                    @ViewBag.BlogCount,
                    @ViewBag.CategoryCount,
                    @ViewBag.CommentCount,
                    @ViewBag.UserCount
                ],
                backgroundColor: [
                    'rgba(30, 136, 229, 0.8)',
                    'rgba(67, 160, 71, 0.8)',
                    'rgba(251, 140, 0, 0.8)',
                    'rgba(229, 57, 53, 0.8)'
                ],
                borderColor: '#fff',
                borderWidth: 3
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    display: true,
                    position: 'bottom',
                    labels: {
                        padding: 15,
                        font: {
                            size: 12,
                            weight: '500'
                        },
                        usePointStyle: true,
                        pointStyle: 'circle'
                    }
                },
                tooltip: {
                    backgroundColor: 'rgba(0, 0, 0, 0.8)',
                    padding: 12,
                    borderRadius: 8,
                    callbacks: {
                        label: function(context) {
                            let label = context.label || '';
                            let value = context.parsed || 0;
                            let total = context.dataset.data.reduce((a, b) => a + b, 0);
                            let percentage = ((value / total) * 100).toFixed(1);
                            return label + ': ' + value + ' (' + percentage + '%)';
                        }
                    }
                }
            }
        }
    });
</script>